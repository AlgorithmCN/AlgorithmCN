<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script type="text/javascript">
    function heapSort(array) {
      function swap(array, i, j) {
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }

      function maxHeapify(array, index, heapSize) {
        var iMax = index;
        iLeft = index * 2 + 1;
        iRight = index * 2 + 2;

        if (iLeft < heapSize && array[index] < array[iLeft]) {
          iMax = iLeft;
        }

        if (iRight < heapSize && array[iMax] < array[iRight]) {
          iMax = iRight;
        }
        if (iMax != index) {
          swap(array, iMax, index);
          maxHeapify(array, iMax, heapSize); // 递归调整
        }
      }

      function buildMaxHeap(array) {
        var i,
        iParent = Math.floor(array.length / 2) - 1;

        for (i = iParent; i >= 0; i--) {
          maxHeapify(array, i, array.length);
        }
      }

      function sort(array) {
        buildMaxHeap(array); //找出第一个最大堆

        for (var i = array.length - 1; i > 0; i--) {
          swap(array, 0, i);
          maxHeapify(array, 0, i);
        }
        return array;
      }

      return sort(array);
    }











  </script>
</head>
<body>

</body>
</html>
